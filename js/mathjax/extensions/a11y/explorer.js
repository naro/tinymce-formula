MathJax.Hub.Register.StartupHook("Sre Ready",function(){var e,t,a=MathJax.Hub.config.menuSettings,i={};MathJax.Hub.Register.StartupHook("MathEvents Ready",function(){e=MathJax.Extension.MathEvents.Event.False,t=MathJax.Extension.MathEvents.Event.KEY});var n=MathJax.Extension.explorer={version:"1.4.0",dependents:[],defaults:{walker:"table",highlight:"none",background:"blue",foreground:"black",speech:!0,generation:"lazy",subtitle:!1,ruleset:"mathspeak-default"},eagerComplexity:80,prefix:"Assistive-",hook:null,locHook:null,oldrules:null,addMenuOption:function(e,t){a[n.prefix+e]=t},addDefaults:function(){for(var e,t=MathJax.Hub.CombineConfig("explorer",n.defaults),i=Object.keys(t),o=0;e=i[o];o++)void 0===a[n.prefix+e]&&n.addMenuOption(e,t[e]);n.setSpeechOption(),s.Reset()},setOption:function(e,t){a[n.prefix+e]!==t&&(n.addMenuOption(e,t),s.Reset())},getOption:function(e){return a[n.prefix+e]},speechOption:function(e){n.oldrules!==e.value&&(n.setSpeechOption(),s.Regenerate())},setSpeechOption:function(){var e=a[n.prefix+"ruleset"],t=e.split("-");sre.System.getInstance().setupEngine({locale:MathJax.Localization.locale,domain:n.Domain(t[0]),style:t[1],rules:n.RuleSet(t[0])}),n.oldrules=e},Domain:function(e){switch(e){case"chromevox":return"default";case"mathspeak":default:return"mathspeak"}},RuleSet:function(e){switch(e){case"chromevox":return["AbstractionRules","SemanticTreeRules"];case"mathspeak":default:return["AbstractionRules","AbstractionSpanish","MathspeakRules","MathspeakSpanish"]}},hook:null,locHook:null,Enable:function(e,t){a.explorer=!0,t&&(i.explorer=!0),MathJax.Extension.collapsible.Enable(!1,t),MathJax.Extension.AssistiveMML&&(MathJax.Extension.AssistiveMML.config.disabled=!0,a.assistiveMML=!1,t&&(i.assistiveMML=!1)),this.DisableMenus(!1),this.hook||(this.hook=MathJax.Hub.Register.MessageHook("New Math",["Register",this.Explorer])),this.locHook||(this.locHook=MathJax.Hub.Register.MessageHook("Locale Reset",["RemoveSpeech",this.Explorer])),e&&MathJax.Hub.Queue(["Reprocess",MathJax.Hub])},Disable:function(e,t){a.explorer=!1,t&&(i.explorer=!1),this.DisableMenus(!0),this.hook&&(MathJax.Hub.UnRegister.MessageHook(this.hook),this.hook=null);for(var n=this.dependents.length-1;n>=0;n--){var o=this.dependents[n];o.Disable&&o.Disable(!1,t)}},DisableMenus:function(e){if(MathJax.Menu){var t=MathJax.Menu.menu.FindId("Accessibility","Explorer");if(t){t=t.submenu;for(var i,o=t.items,r=2;i=o[r];r++)i.disabled=e;e||!t.FindId("SpeechOutput")||a[n.prefix+"speech"]||(t.FindId("Subtitles").disabled=!0)}}},Dependent:function(e){this.dependents.push(e)}},o=MathJax.Object.Subclass({div:null,inner:null,Init:function(){this.div=o.Create("assertive"),this.inner=MathJax.HTML.addElement(this.div,"div")},Add:function(){o.added||(document.body.appendChild(this.div),o.added=!0)},Show:function(e,t){this.div.classList.add("MJX_LiveRegion_Show");var a=e.getBoundingClientRect(),i=a.bottom+10+window.pageYOffset,n=a.left+window.pageXOffset;this.div.style.top=i+"px",this.div.style.left=n+"px";var o=t.colorString();this.inner.style.backgroundColor=o.background,this.inner.style.color=o.foreground},Hide:function(e){this.div.classList.remove("MJX_LiveRegion_Show")},Clear:function(){this.Update(""),this.inner.style.top="",this.inner.style.backgroundColor=""},Update:function(e){n.getOption("speech")&&o.Update(this.inner,e)}},{ANNOUNCE:"Navigatable Math in page. Explore with shift space and arrow keys. Expand or collapse elements hitting enter.",announced:!1,added:!1,styles:{".MJX_LiveRegion":{position:"absolute",top:"0",height:"1px",width:"1px",padding:"1px",overflow:"hidden"},".MJX_LiveRegion_Show":{top:"0",position:"absolute",width:"auto",height:"auto",padding:"0px 0px",opacity:1,"z-index":"202",left:0,right:0,margin:"0 auto","background-color":"white","box-shadow":"0px 10px 20px #888",border:"2px solid #CCCCCC"}},Create:function(e){var t=MathJax.HTML.Element("div",{className:"MJX_LiveRegion"});return t.setAttribute("aria-live",e),t},Update:MathJax.Hub.Browser.isPC?function(e,t){e.textContent="",setTimeout(function(){e.textContent=t},100)}:function(e,t){e.textContent="",e.textContent=t},Announce:function(){if(n.getOption("speech")){o.announced=!0,MathJax.Ajax.Styles(o.styles);var e=o.Create("polite");document.body.appendChild(e),o.Update(e,o.ANNOUNCE),setTimeout(function(){document.body.removeChild(e)},1e3)}}});MathJax.Extension.explorer.LiveRegion=o;var r=MathJax.Ajax.fileURL(MathJax.Ajax.config.path.a11y),s=MathJax.Extension.explorer.Explorer={liveRegion:o(),walker:null,highlighter:null,hoverer:null,flamer:null,speechDiv:null,earconFile:r+"/invalid_keypress"+(-1!==["Firefox","Chrome","Opera"].indexOf(MathJax.Hub.Browser.name)?".ogg":".mp3"),expanded:!1,focusoutEvent:MathJax.Hub.Browser.isFirefox?"blur":"focusout",focusinEvent:"focus",ignoreFocusOut:!1,jaxCache:{},messageID:null,Reset:function(){s.FlameEnriched()},Register:function(e){if(n.hook){var t=document.getElementById(e[1]);if(t&&t.id){var a=MathJax.Hub.getJaxFor(t.id);a&&a.enriched&&(s.StateChange(t.id,a),s.liveRegion.Add(),s.AddEvent(t))}}},StateChange:function(e,t){s.GetHighlighter(.2);var a=s.jaxCache[e];a&&a===t.root||(a&&s.highlighter.resetState(e+"-Frame"),s.jaxCache[e]=t.root)},AddAria:function(e){e.setAttribute("role","application"),e.setAttribute("aria-label","Math")},AddHook:function(e){s.RemoveHook(),s.hook=MathJax.Hub.Register.MessageHook("End Math",function(t){var a=t[1].id+"-Frame",i=document.getElementById(a);e&&a===s.expanded&&(s.ActivateWalker(i,e),i.focus(),s.expanded=!1)})},RemoveHook:function(){s.hook&&(MathJax.Hub.UnRegister.MessageHook(s.hook),s.hook=null)},AddMessage:function(){return MathJax.Message.Set("Generating Speech Output")},RemoveMessage:function(e){e&&MathJax.Message.Clear(e)},AddEvent:function(e){var t=e.id+"-Frame",a=e.previousSibling;if(a){var i=a.id!==t?a.firstElementChild:a;s.AddAria(i),s.AddMouseEvents(i),"MathJax_MathML"===i.className&&(i=i.firstElementChild),i&&(i.onkeydown=s.Keydown,s.Flame(i),i.addEventListener(s.focusinEvent,function(e){n.hook&&(o.announced||o.Announce())}),i.addEventListener(s.focusoutEvent,function(e){if(n.hook)return s.ignoreFocusOut&&(s.ignoreFocusOut=!1,"enter"===s.walker.moved)?void e.target.focus():void(s.walker&&s.DeactivateWalker())}),n.getOption("speech")&&s.AddSpeech(i))}},AddSpeech:function(e){var t=e.id,a=MathJax.Hub.getJaxFor(t),i=a.root.toMathML();if(e.getAttribute("haslabel")||s.AddMathLabel(i,t),!e.getAttribute("hasspeech"))switch(MathJax.Hub.config.explorer.generation){case"eager":s.AddSpeechEager(i,t);break;case"mixed":e.querySelectorAll("[data-semantic-complexity]").length>=n.eagerComplexity&&s.AddSpeechEager(i,t)}},AddSpeechLazy:function(e){var t=new sre.TreeSpeechGenerator;t.setRebuilt(s.walker.rebuilt),t.getSpeech(s.walker.rootNode,s.walker.xml),e.setAttribute("hasspeech","true")},AddSpeechEager:function(e,t){s.MakeSpeechTask(e,t,sre.TreeSpeechGenerator,function(e,t){e.setAttribute("hasspeech","true")},5)},AddMathLabel:function(e,t){s.MakeSpeechTask(e,t,sre.SummarySpeechGenerator,function(e,t){e.setAttribute("haslabel","true"),e.setAttribute("aria-label",t)},5)},MakeSpeechTask:function(e,t,a,i,n){var o=s.AddMessage();setTimeout(function(){var n=new a,r=document.getElementById(t),l=new sre.DummyWalker(r,n,s.highlighter,e),h=l.speech();h&&i(r,h),s.RemoveMessage(o)},n)},Keydown:function(a){if(a.keyCode===t.ESCAPE){if(!s.walker)return;return s.RemoveHook(),s.DeactivateWalker(),void e(a)}if(s.walker&&s.walker.isActive()){void 0!==s.walker.modifier&&(s.walker.modifier=a.shiftKey);var i=s.walker.move(a.keyCode);if(null===i)return;if(i){if("expand"===s.walker.moved){if(s.expanded=s.walker.node.id,MathJax.Hub.Browser.isEdge)return s.ignoreFocusOut=!0,void s.DeactivateWalker();if(MathJax.Hub.Browser.isFirefox||MathJax.Hub.Browser.isMSIE)return void s.DeactivateWalker()}s.liveRegion.Update(s.walker.speech()),s.Highlight()}else s.PlayEarcon();return void e(a)}var o=a.target;if(a.keyCode===t.SPACE){if(a.shiftKey&&n.hook){var r=MathJax.Hub.getJaxFor(o);s.ActivateWalker(o,r),s.AddHook(r)}else MathJax.Extension.MathEvents.Event.ContextMenu(a,o);return void e(a)}},GetHighlighter:function(e){s.highlighter=sre.HighlighterFactory.highlighter({color:n.getOption("background"),alpha:e},{color:n.getOption("foreground"),alpha:1},{renderer:MathJax.Hub.outputJax["jax/mml"][0].id,browser:MathJax.Hub.Browser.name})},AddMouseEvents:function(e){sre.HighlighterFactory.addEvents(e,{mouseover:s.MouseOver,mouseout:s.MouseOut},{renderer:MathJax.Hub.outputJax["jax/mml"][0].id,browser:MathJax.Hub.Browser.name})},MouseOver:function(t){if("none"!==n.getOption("highlight")){if("hover"===n.getOption("highlight")){var a=t.currentTarget;s.GetHighlighter(.1),s.highlighter.highlight([a]),s.hoverer=!0}e(t)}},MouseOut:function(t){return s.hoverer&&(s.highlighter.unhighlight(),s.hoverer=!1),e(t)},Flame:function(e){if("flame"===n.getOption("highlight"))return s.GetHighlighter(.05),s.highlighter.highlightAll(e),void(s.flamer=!0)},UnFlame:function(){s.flamer&&(s.highlighter.unhighlightAll(),s.flamer=null)},FlameEnriched:function(){s.UnFlame();for(var e,t=0,a=MathJax.Hub.getAllJax();e=a[t];t++)s.Flame(e.SourceElement().previousSibling)},Walkers:{syntactic:sre.SyntaxWalker,table:sre.TableWalker,semantic:sre.SemanticWalker,none:sre.DummyWalker},ActivateWalker:function(e,t){var a=n.getOption("speech"),i=n.getOption("walker")?s.Walkers[MathJax.Hub.config.explorer.walker]:s.Walkers.none,o=a?new sre.DirectSpeechGenerator:new sre.DummySpeechGenerator;s.GetHighlighter(.2),s.walker=new i(e,o,s.highlighter,t.root.toMathML()),a&&!e.getAttribute("hasspeech")&&s.AddSpeechLazy(e),s.walker.activate(),a&&(n.getOption("subtitle")&&s.liveRegion.Show(e,s.highlighter),s.liveRegion.Update(s.walker.speech())),s.Highlight(),s.ignoreFocusOut&&setTimeout(function(){s.ignoreFocusOut=!1},500)},DeactivateWalker:function(){s.liveRegion.Clear(),s.liveRegion.Hide(),s.Unhighlight(),s.currentHighlight=null,s.walker.deactivate(),s.walker=null},Highlight:function(){s.Unhighlight(),s.highlighter.highlight(s.walker.getFocus().getNodes())},Unhighlight:function(){s.highlighter.unhighlight()},PlayEarcon:function(){new Audio(s.earconFile).play()},SpeechOutput:function(){s.Reset(),["Subtitles"].forEach(function(e){var t=MathJax.Menu.menu.FindId("Accessibility","Explorer",e);t&&(t.disabled=!t.disabled)}),s.Regenerate()},RemoveSpeech:function(){n.setSpeechOption();for(var e,t=0,a=MathJax.Hub.getAllJax();e=a[t];t++){var i=document.getElementById(e.inputID+"-Frame");i&&(i.removeAttribute("hasspeech"),i.removeAttribute("haslabel"))}},Regenerate:function(){for(var e,t=0,a=MathJax.Hub.getAllJax();e=a[t];t++){var i=document.getElementById(e.inputID+"-Frame");i&&(i.removeAttribute("hasspeech"),s.AddSpeech(i))}},Startup:function(){var e=MathJax.Extension.collapsible;e&&e.Dependent(n),n.addDefaults()}};MathJax.Hub.Register.StartupHook("End Extensions",function(){n[!1===a.explorer?"Disable":"Enable"](),MathJax.Hub.Startup.signal.Post("Explorer Ready"),MathJax.Hub.Register.StartupHook("MathMenu Ready",function(){i=MathJax.Menu.cookie;var e,t=function(e){n[a.explorer?"Enable":"Disable"](!0,!0),MathJax.Menu.saveCookie()},o=MathJax.Menu.ITEM,r=MathJax.Menu.menu,l={action:s.Reset},h={action:n.speechOption},u=o.SUBMENU(["Explorer","Explorer"],o.CHECKBOX(["Active","Active"],"explorer",{action:t}),o.RULE(),o.CHECKBOX(["Walker","Walker"],"Assistive-walker"),o.SUBMENU(["Highlight","Highlight"],o.RADIO(["none","None"],"Assistive-highlight",l),o.RADIO(["hover","Hover"],"Assistive-highlight",l),o.RADIO(["flame","Flame"],"Assistive-highlight",l)),o.SUBMENU(["Background","Background"],o.RADIO(["blue","Blue"],"Assistive-background",l),o.RADIO(["red","Red"],"Assistive-background",l),o.RADIO(["green","Green"],"Assistive-background",l),o.RADIO(["yellow","Yellow"],"Assistive-background",l),o.RADIO(["cyan","Cyan"],"Assistive-background",l),o.RADIO(["magenta","Magenta"],"Assistive-background",l),o.RADIO(["white","White"],"Assistive-background",l),o.RADIO(["black","Black"],"Assistive-background",l)),o.SUBMENU(["Foreground","Foreground"],o.RADIO(["black","Black"],"Assistive-foreground",l),o.RADIO(["white","White"],"Assistive-foreground",l),o.RADIO(["magenta","Magenta"],"Assistive-foreground",l),o.RADIO(["cyan","Cyan"],"Assistive-foreground",l),o.RADIO(["yellow","Yellow"],"Assistive-foreground",l),o.RADIO(["green","Green"],"Assistive-foreground",l),o.RADIO(["red","Red"],"Assistive-foreground",l),o.RADIO(["blue","Blue"],"Assistive-foreground",l)),o.RULE(),o.CHECKBOX(["SpeechOutput","Speech Output"],"Assistive-speech",{action:s.SpeechOutput}),o.CHECKBOX(["Subtitles","Subtitles"],"Assistive-subtitle",{disabled:!a["Assistive-speech"]}),o.RULE(),o.SUBMENU(["Mathspeak","Mathspeak Rules"],o.RADIO(["mathspeak-default","Verbose"],"Assistive-ruleset",h),o.RADIO(["mathspeak-brief","Brief"],"Assistive-ruleset",h),o.RADIO(["mathspeak-sbrief","Superbrief"],"Assistive-ruleset",h)),o.SUBMENU(["Chromevox","ChromeVox Rules"],o.RADIO(["chromevox-default","Verbose"],"Assistive-ruleset",h),o.RADIO(["chromevox-short","Short"],"Assistive-ruleset",h),o.RADIO(["chromevox-alternative","Alternative"],"Assistive-ruleset",h))),d=(r.FindId("Accessibility")||{}).submenu;d?(e=d.IndexOfId("Explorer"),null!==e?d.items[e]=u:(e=d.IndexOfId("CollapsibleMath"),d.items.splice(e+1,0,u))):(e=r.IndexOfId("CollapsibleMath"),r.items.splice(e+1,0,u)),a.explorer||n.DisableMenus(!0)},20)},20)}),MathJax.Hub.Register.StartupHook("SVG Jax Ready",function(){MathJax.Hub.Config({SVG:{addMMLclasses:!0}});var e=MathJax.OutputJax.SVG;if(parseFloat(e.version)<2.7){var t=e.getJaxFromMath;e.Augment({getJaxFromMath:function(e){return e.parentNode.className.match(/MathJax_SVG_Display/)&&(e=e.parentNode),t.call(this,e)}})}}),MathJax.Ajax.config.path.a11y||(MathJax.Ajax.config.path.a11y=MathJax.Hub.config.root+"/extensions/a11y"),MathJax.Ajax.Require("[a11y]/collapsible.js"),MathJax.Hub.Register.StartupHook("Collapsible Ready",function(){MathJax.Extension.explorer.Explorer.Startup(),MathJax.Ajax.loadComplete("[a11y]/explorer.js")});